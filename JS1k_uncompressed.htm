<!DOCTYPE html>
<!-- saved from url=(0037)http://js1k.com/2013-spring/shim.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>JS1k, 1k demo submission [ID]</title>
		<meta charset="utf-8">
	</head>
	<body>
		<canvas id="c"></canvas>
		<script>
			var b = document.body;
			var c = document.getElementsByTagName('canvas')[0];
			var a = c.getContext('2d');
			document.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218
		</script>
		<script>
// start of submission //
var __moveTo__ = 'moveTo', __lineTo__ = 'lineTo', __beginPath__ = 'beginPath', __closePath__ = 'closePath', __stroke__ ='stroke',m=Math, co = m.cos, si = m.sin, is = setInterval, ic = clearInterval, ts = setTimeout, __strokeStyle__='strokeStyle', __lineWidth__='lineWidth', pi=m.PI, __random__='random';
var basic_interval = 80;
		function e3(a,d,e,f,g,x,y,k,s,j)
		{
			var q = -9;
var interval1 = is(sec,basic_interval);
var xx = x;
var yy=y;
function sec() {
q++;
var t = 0.1*q;
if (t>k*pi) ic(interval1);

a[__strokeStyle__]=s;
a[__lineWidth__]=2+j*(1-2*(t+1)/k/pi);
a[__beginPath__]();
a[__moveTo__](xx,yy);
if (t>0) {
	u=(1+1/2/k)/2;
v=(1+1/4/k)/2;
xxx=-co(t)*(1-t/pi/k);
yyy=si(t)*(1-t/pi/k);

xx=x+d*u+f*v+(xxx*d+f*yyy)*u;
yy=y+e*u+g*v+(xxx*e+g*yyy)*v;
}
else {
	xx=x+(1+t)*f/2;
	yy=y+(1+t)*g/2;
}
a[__lineTo__](xx,yy);
a[__stroke__]();
a[__closePath__]();
}	
		}
	
		function tr(a,x,y,u,v,l,p)
		{
var x1=x+u,y1=y+v;

			setTimeout(function(){e3(a,-v*l/2,l*u/2,2*u/3,2*v/3,x,y,2+4*m[__random__](),'teal',1);},12*basic_interval);
			setTimeout(function(){e3(a,v/2,-u/2,2*u/3,2*v/3,x+u/2,y+v/2,1+4*m[__random__](), 'teal',1);},12*basic_interval*2);
			if (p>3+4*m[__random__]()) {
				setTimeout(function(){e3(a,-v*l/2,l*u/2,2*u/3,2*v/3,x1,y1,1+2*m[__random__](),'red',-1);},3*12*basic_interval);
				setTimeout(function(){e3(a,v/2,-u/2,2*u/3,2*v/3,x1,y1,1+4*m[__random__](),'red',-1);},3*12*basic_interval);
				return;
			}

			var alpha=pi/6+m[__random__]()*0.3;
			aa=(1+m[__random__]())/2;
			bb=(1+m[__random__]())/2;
			var u1=l*(u*co(-aa*alpha)-v*si(-aa*alpha));
			var v1=l*(u*si(-aa*alpha)+v*co(-aa*alpha));
			var u2=l*(u*co(bb*alpha)-v*si(bb*alpha));
			var v2=l*(u*si(bb*alpha)+v*co(bb*alpha));
		
			ts(function(){tr(a,x1,y1,u1,v1,l,p+1);},3*12*basic_interval);
			
			ts(function(){tr(a,x1,y1,u2,v2,l,p+1);},basic_interval*4*12);
		}
		tr(a,100,150,0,-40,0.8,1);
// end of submission //
		</script>
	

</body></html>